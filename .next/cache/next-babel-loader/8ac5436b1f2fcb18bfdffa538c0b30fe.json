{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from \"../firebase/firebase\";\nvar storage = firebase.storage();\nexport function uploadFilesToFirebase(files) {\n  var promises = [];\n  var errorObtained;\n  files.forEach(function (file) {\n    var uploadTask = storage.ref(\"files/\".concat(file.name)).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, function (snapshot) {\n      var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100; //console.log('Upload is ' + progress + '% done');\n    }, function (error) {\n      errorObtained = error; //console.log(error)  \n    }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n  });\n  Promise.all(promises).then(function () {\n    return (\n      /*console.log(\"All files uploaded\")*/\n      console.log(errorObtained)\n    );\n  })[\"catch\"](function (error) {\n    return (\n      /*console.log(error.code)*/\n      console.log(\"ERROR\")\n    );\n  });\n}","map":{"version":3,"sources":["C:/Users/mabet/Desktop/nextjs-prueba/firebase/fileupload.js"],"names":["firebase","storage","uploadFilesToFirebase","files","promises","errorObtained","forEach","file","uploadTask","ref","name","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","error","Promise","all","then","console","log"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,sBAArB;AACA,IAAMC,OAAO,GAAGD,QAAQ,CAACC,OAAT,EAAhB;AAEA,OAAO,SAASC,qBAAT,CAA+BC,KAA/B,EAAqC;AACxC,MAAMC,QAAQ,GAAG,EAAjB;AACA,MAAIC,aAAJ;AACAF,EAAAA,KAAK,CAACG,OAAN,CAAc,UAAAC,IAAI,EAAG;AACjB,QAAMC,UAAU,GAAGP,OAAO,CAACQ,GAAR,iBAAqBF,IAAI,CAACG,IAA1B,GAAkCC,GAAlC,CAAsCJ,IAAtC,CAAnB;AACAC,IAAAA,UAAU,CAACI,EAAX,CACIZ,QAAQ,CAACC,OAAT,CAAiBY,SAAjB,CAA2BC,aAD/B,EAEI,UAACC,QAAD,EAAa;AACT,UAAIC,QAAQ,GAAID,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAAnE,CADS,CAET;AACH,KALL,EAMI,UAACC,KAAD,EAAU;AACNd,MAAAA,aAAa,GAAGc,KAAhB,CADM,CAER;AACD,KATL,wEAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAVJ;AAcH,GAhBD;AAkBAC,EAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAZ,EACCkB,IADD,CACM;AAAA;AAAM;AAAsCC,MAAAA,OAAO,CAACC,GAAR,CAAYnB,aAAZ;AAA5C;AAAA,GADN,WAEO,UAAAc,KAAK;AAAA;AAAI;AAA4BI,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AAAhC;AAAA,GAFZ;AAGH","sourcesContent":["import firebase from \"../firebase/firebase\";\r\nconst storage = firebase.storage();\r\n\r\nexport function uploadFilesToFirebase(files){\r\n    const promises = [];\r\n    var errorObtained;\r\n    files.forEach(file =>{\r\n        const uploadTask = storage.ref(`files/${file.name}`).put(file);\r\n        uploadTask.on(\r\n            firebase.storage.TaskEvent.STATE_CHANGED,\r\n            (snapshot) =>{\r\n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                //console.log('Upload is ' + progress + '% done');\r\n            },\r\n            (error) =>{\r\n                errorObtained = error;\r\n              //console.log(error)  \r\n            },\r\n            async () =>{\r\n                //console.log(`file ${file.name} uploaded`);\r\n            }\r\n        )\r\n    })\r\n\r\n    Promise.all(promises)\r\n    .then(() => /*console.log(\"All files uploaded\")*/ console.log(errorObtained))\r\n    .catch(error => /*console.log(error.code)*/ console.log(\"ERROR\"))\r\n}"]},"metadata":{},"sourceType":"module"}