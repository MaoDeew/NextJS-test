{"ast":null,"code":"import firebase from \"../firebase/firebase\";\nconst storage = firebase.storage();\nexport async function uploadFilesToFirebase(files) {\n  const promises = [];\n  files.forEach(file => {\n    const uploadTask = storage.ref(`files/${file.name}`).put(file);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, snapshot => {\n      var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100; //console.log('Upload is ' + progress + '% done');\n    }, error => {\n      console.log(error);\n    }, async () => {//console.log(`file ${file.name} uploaded`);\n    });\n  });\n  const result = await Promise.allSettled(promises);\n  console.log(result.map(s => s.status));\n  /*Promise.all(promises)\r\n  .then(() => console.log(\"All files uploaded\"))\r\n  .catch(error => console.log(error.code))*/\n}","map":{"version":3,"sources":["C:/Users/mabet/Desktop/nextjs-prueba/firebase/fileupload.js"],"names":["firebase","storage","uploadFilesToFirebase","files","promises","forEach","file","uploadTask","ref","name","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","error","console","log","result","Promise","allSettled","map","s","status"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,sBAArB;AACA,MAAMC,OAAO,GAAGD,QAAQ,CAACC,OAAT,EAAhB;AAEA,OAAO,eAAeC,qBAAf,CAAqCC,KAArC,EAA2C;AAC9C,QAAMC,QAAQ,GAAG,EAAjB;AACAD,EAAAA,KAAK,CAACE,OAAN,CAAcC,IAAI,IAAG;AACjB,UAAMC,UAAU,GAAGN,OAAO,CAACO,GAAR,CAAa,SAAQF,IAAI,CAACG,IAAK,EAA/B,EAAkCC,GAAlC,CAAsCJ,IAAtC,CAAnB;AACAC,IAAAA,UAAU,CAACI,EAAX,CACIX,QAAQ,CAACC,OAAT,CAAiBW,SAAjB,CAA2BC,aAD/B,EAEKC,QAAD,IAAa;AACT,UAAIC,QAAQ,GAAID,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAAnE,CADS,CAET;AACH,KALL,EAMKC,KAAD,IAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KARL,EASI,YAAW,CACP;AACH,KAXL;AAaH,GAfD;AAiBA,QAAMG,MAAM,GAAG,MAAMC,OAAO,CAACC,UAAR,CAAmBnB,QAAnB,CAArB;AACAe,EAAAA,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACG,GAAP,CAAWC,CAAC,IAAEA,CAAC,CAACC,MAAhB,CAAZ;AACA;;;AAGH","sourcesContent":["import firebase from \"../firebase/firebase\";\r\nconst storage = firebase.storage();\r\n\r\nexport async function uploadFilesToFirebase(files){\r\n    const promises = [];\r\n    files.forEach(file =>{\r\n        const uploadTask = storage.ref(`files/${file.name}`).put(file);\r\n        uploadTask.on(\r\n            firebase.storage.TaskEvent.STATE_CHANGED,\r\n            (snapshot) =>{\r\n                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                //console.log('Upload is ' + progress + '% done');\r\n            },\r\n            (error) =>{\r\n              console.log(error)  \r\n            },\r\n            async () =>{\r\n                //console.log(`file ${file.name} uploaded`);\r\n            }\r\n        )\r\n    })\r\n\r\n    const result = await Promise.allSettled(promises);\r\n    console.log(result.map(s=>s.status));\r\n    /*Promise.all(promises)\r\n    .then(() => console.log(\"All files uploaded\"))\r\n    .catch(error => console.log(error.code))*/\r\n}"]},"metadata":{},"sourceType":"module"}